<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/index.css">    
</head>
<body>
    <div class="page-wrapper">
        <div class="distracted">
            <h1>Im so distracted</h1>        
        </div>

        <div class="container">
            <h1>This is what im going to do <br> RIGHT NOW</h1>
            
            <form class="box box-1" >
                <textarea class="text"></textarea>
                <button type="submit">Submit</button>
            </form>

            <div class="button-container">
                <button class="new-card">new</button>
            </div>
        </div>

        <div class="concurrent">
            <h1>Im so concurrent</h1>
        </div>
    </div>

    <script>


        
        // add a new card
        const newCard = document.querySelector('.new-card');
        let boxCount = 1;



        newCard.addEventListener('click', () => {
            boxCount++;
            const newBox = document.createElement('form');
            newBox.setAttribute('id', `box-${boxCount}`);
            const newButton = document.createElement('button');
            newButton.textContent = 'Submit';
            newButton.type = 'submit';
            newBox.className = `box box-${(boxCount % 5) + 1}`; // Cycle through box classes
            const newTextArea = document.createElement('textarea');
            newTextArea.className = 'text';
            newBox.appendChild(newTextArea);
            newBox.appendChild(newButton);
            
            
            // Create vertical line and arrow
            const vl = document.createElement('div');
            vl.className = 'vl';
            const arrowDown = document.createElement('div');
            arrowDown.className = 'arrow-down';

            // Get references
            const container = document.querySelector('.container');
            const buttonContainer = document.querySelector('.button-container');
            
            // Add elements to DOM
            container.insertBefore(vl, buttonContainer);
            container.insertBefore(arrowDown, buttonContainer);
            container.insertBefore(newBox, buttonContainer);
            
            // Ensure sidebars extend with content
            const pageHeight = container.scrollHeight;
            document.querySelector('.page-wrapper').style.minHeight = pageHeight + 'px';
        });

        let formArray = [];
        for (let i = 1; i <= boxCount; i++) { 
            const box = document.getElementById(`box-${i}`);
            if (box) {
            formArray.push(box);
            }
        }

        formArray.forEach(form => {
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const text = form.querySelector('.text').value;
                console.log(text);
            });
        });

    </script>
</body>
</html>
